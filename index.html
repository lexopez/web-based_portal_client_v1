<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>College of Business Administration - ESSU CAN-AVID</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <link href="assets/img/essu_logo.jpg" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/css/main.css" rel="stylesheet">
  <style>
    /* Hero Section */
    #hero {
      width: 100%;
      min-height: 100vh;
      background-image: url('./assets/img/hero_2.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      display: flex;
      align-items: flex-end;       /* bottom alignment */
      justify-content: flex-start;  /* left alignment */
      position: relative;
      padding: 3rem 1rem;
      transition: background-image 1s ease-in-out; /* smooth fade */
    }
  
    /* Overlay */
    #hero .overlay {
      position: absolute;
      top: 0; bottom: 505px; left: 0; right: 0;
      background-color: rgba(0, 0, 0, 0.4);
      z-index: 1;
    }
  
    /* Content */
    .hero-content {
      position: relative;
      z-index: 2;
      color: white;
      max-width: 700px;
      text-align: left;
      margin-left: 0;
      margin-bottom: 2rem;
    }
  
    .hero-content h1 {
      font-size: clamp(1.8rem, 4vw, 3rem);
      font-weight: 900;
      line-height: 1.3;
      margin: 0;
      color: white;
      -webkit-text-stroke: 1px black;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
  
    .cta-buttons {
      margin-top: 1.5rem;
    }
  
    .cta-buttons a.btn-primary {
      background-color: #0044ff;
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      text-decoration: none;
      font-weight: 500;
      display: inline-block;
    }
  
    /* Slide-in bottom-left animation */
    .slide-in-bottom-left {
      opacity: 0;
      transform: translate(-50px, 50px);
      animation: slideInBottomLeft 1s ease-out forwards;
    }
    .delay-0 { animation-delay: 0.3s; }
    .delay-1 { animation-delay: 0.8s; }
  
    @keyframes slideInBottomLeft {
      to { transform: translate(0, 0); opacity: 1; }
    }
  
    /* Carousel Arrows */
    .carousel-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(0,0,0,0.5);
      border: none;
      color: white;
      font-size: 2rem;
      padding: 0.5rem 1rem;
      cursor: pointer;
      z-index: 3;
      border-radius: 5px;
    }
    .carousel-arrow.prev { left: 10px; }
    .carousel-arrow.next { right: 10px; }
  
    /* Carousel Dots */
    .carousel-dots {
      position: absolute;
      bottom: 25px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      z-index: 3;
    }
    .carousel-dots span {
      width: 12px;
      height: 12px;
      background-color: rgba(255,255,255,0.5);
      border-radius: 50%;
      cursor: pointer;
    }
    .carousel-dots .active {
      background-color: #0044ff;
    }
  
    /* Responsive Adjustments */
    @media (max-width: 768px) {
      .hero-content h1 { font-size: clamp(1.5rem, 5vw, 2.2rem); }
      .cta-buttons a.btn-primary { padding: 0.6rem 1.2rem; }
    }
    @media (max-width: 480px) {
      .hero-content h1 { font-size: clamp(1.2rem, 5vw, 1.8rem); }
      .cta-buttons a.btn-primary { padding: 0.5rem 1rem; font-size: 0.9rem; }
    }
  </style>
  
</head>

<body class="index-page">

  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center">
        <h1><img src="assets/img/logo.png" alt=""></h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="index.html" class="active">Home</a></li>
          <li class="dropdown"><a href="about.html"><span>About</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="about.html">About Us</a></li>
              <li><a href="admissions.html">Admissions</a></li>
              <li><a href="academics.html">Academics</a></li>
              <li><a href="faculty-staff.html">Faculty &amp; Staff</a></li>
              <li><a href="campus-facilities.html">Campus &amp; Facilities</a></li>
            </ul>
          </li>

          <li><a href="students-life.html">Students Life</a></li>
          <li><a href="news.html">News & Announcements</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

    </div>
  </header>

  <main class="main">
  <section id="hero" class="hero section dark-background">
    <!-- Overlay -->
    <!-- <div class="overlay"></div> -->

    <!-- Content -->
    <div class="hero-content">
      <h1 class="slide-in-bottom-left delay-0 ps-5">Empowering Future Through Education</h1>
      <div class="cta-buttons slide-in-bottom-left delay-1">
        <a href="#featured-programs" class="btn-primary ms-5">Discover Programs</a>
      </div>
    </div>

    <!-- Carousel Controls -->
    <button class="carousel-arrow prev">&#10094;</button>
    <button class="carousel-arrow next">&#10095;</button>
    <div class="carousel-dots"></div>
  </section>
</main>

    </section>

    <section id="about" class="about section">
      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="row mission-vision-row g-4">
          <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
            <div class="value-card h-100">
              <div class="card-icon">
                <i class="bi bi-rocket-takeoff"></i>
              </div>
              <h3>Mission</h3>
              <p>To provide quality education responsive to the national and global needs focused on generating knowledge and technology that will improve the lives of the people.</p>
            </div>
          </div>
          <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
            <div class="value-card h-100">
              <div class="card-icon">
                <i class="bi bi-eye"></i>
              </div>
              <h3>Vision</h3>
              <p>A technologically-advanced university producing professionals and competitive leaders for local and national development.</p>
            </div>
          </div>
          <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
            <div class="value-card h-100">
              <div class="card-icon">
                <i class="bi bi-star"></i>
              </div>
              <h3>Values</h3>
              <h5>Excellence - Accountability - Service</h5>
            </div>
          </div>
        </div>

        <div class="container section-title mt-5" data-aos="fade-up">
          <h2>Core Values</h2>
        </div>

        <div class="row mission-vision-row g-4">
          <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
            <div class="value-card h-100">

              <h3>Excellence</h3>
              <p>Individual commitment to excellence is central to the values that ESSU promotes. The university will be able to achieve excellence through adherence to the highest standards of performance and by collaborating with the very best in the fields of instruction, research, extension, and production.</p>
            </div>
          </div>
          <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
            <div class="value-card h-100">
              <h3>Accountability</h3>
              <p>Every member of the ESSU community is accountable for his every action, decision or activities and for whatever money or property the university entrusts to him. He must accept responsibility for whatever will be the consequences it may bring and to disclose the results in a transparent manner. Thus, he must act with caution and utmost consideration for ethics and honesty in the workplace.</p>
            </div>
          </div>
          <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
            <div class="value-card h-100">
              <h3>Service</h3>
              <p>Service is the commitment of the university to serve not only its stakeholders to provide quality instruction, research, extension, and production but also to serve the need of every member of the ESSU community to advance their well-being.</p>
            </div>
          </div>
        </div>

      </div>

    </section>
      
    <section id="featured-programs" class="featured-programs section">
      <div class="container section-title" data-aos="fade-up">
        <h2>Featured Programs</h2>
        <p>College of Business Administration, ESSU Can-avid</p>
      </div>
    
      <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="isotope-layout" data-default-filter="*" data-layout="masonry" data-sort="original-order">
          <ul class="program-filters isotope-filters" data-aos="fade-up" data-aos-delay="100">
            <li data-filter="*" class="filter-active">All Programs</li>
          </ul>
    
          <div class="row g-4 isotope-container">
    
            <div class="col-lg-6 isotope-item filter-bachelor" data-aos="zoom-in" data-aos-delay="100">
              <div class="program-item">
                <div class="program-badge">Bachelor's Degree</div>
                <div class="row g-0">
                  <div class="col-md-4">
                    <div class="program-image-wrapper">
                      <img src="assets/img/economics.jpg" class="img-fluid" alt="Business Economics">
                    </div>
                  </div>
                  <div class="col-md-8">
                    <div class="program-content">
                      <h3>BSBA</h3>
                      <h6><a href="./business-economics-major-details.html">Major in Business Economics</a></h6>
                      <div class="program-highlights">
                        <span><i class="bi bi-clock"></i> 4 Years</span>
                        <span><i class="bi bi-people-fill"></i> 135 Credits</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
    
            <div class="col-lg-6 isotope-item filter-bachelor" data-aos="zoom-in" data-aos-delay="200">
              <div class="program-item">
                <div class="program-badge">Bachelor's Degree</div>
                <div class="row g-0">
                  <div class="col-md-4">
                    <div class="program-image-wrapper">
                      <img src="assets/img/financial.jpg" class="img-fluid" alt="Financial Management">
                    </div>
                  </div>
                  <div class="col-md-8">
                    <div class="program-content">
                      <h3>BSBA</h3>
                      <h6><a href="./finacial-management-major-details.html">Major in Financial Management</a></h6>
                      <div class="program-highlights">
                        <span><i class="bi bi-clock"></i> 4 Years</span>
                        <span><i class="bi bi-people-fill"></i> 135 Credits</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
    
            <div class="col-lg-6 isotope-item filter-bachelor" data-aos="zoom-in" data-aos-delay="300">
              <div class="program-item">
                <div class="program-badge">Bachelor's Degree</div>
                <div class="row g-0">
                  <div class="col-md-4">
                    <div class="program-image-wrapper">
                      <img src="assets/img/HRM.jpg" class="img-fluid" alt="Human Resource Management">
                    </div>
                  </div>
                  <div class="col-md-8">
                    <div class="program-content">
                      <h3>BSBA</h3>
                      <h6><a href="./human-resources-management-major-details.html">Major in Human Resource Management</a></h6>
                      <div class="program-highlights">
                        <span><i class="bi bi-clock"></i> 4 Years</span>
                        <span><i class="bi bi-people-fill"></i> 135 Credits</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
    
            <div class="col-lg-6 isotope-item filter-bachelor" data-aos="zoom-in" data-aos-delay="400">
              <div class="program-item">
                <div class="program-badge">Bachelor's Degree</div>
                <div class="row g-0">
                  <div class="col-md-4">
                    <div class="program-image-wrapper">
                      <img src="assets/img/marketing.jpg" class="img-fluid" alt="Marketing Management">
                    </div>
                  </div>
                  <div class="col-md-8">
                    <div class="program-content">
                      <h3>BSBA</h3>
                      <h6><a href="./marketing-management-major-details.html">Major in Marketing Management</a></h6>
                      <div class="program-highlights">
                        <span><i class="bi bi-clock"></i> 4 Years</span>
                        <span><i class="bi bi-people-fill"></i> 135 Credits</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    

    <section id="students-life-block" class="students-life-block section">
      <div class="container section-title" data-aos="fade-up">
        <h2>Student Life at ESSU Can-avid</h2>
      </div>
    
      <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="row align-items-center gy-4">
          <div class="col-lg-6" data-aos="fade-right" data-aos-delay="200">
            <div class="students-life-img position-relative">
              <img src="assets/img/essu-canavid.jpg" class="img-fluid rounded-4 shadow-sm" alt="Campus Life">
              <div class="img-overlay">
                <h3>Vibrant Campus Culture</h3>
                <a href="students-life.html" class="explore-btn">Explore More <i class="bi bi-arrow-right"></i></a>
              </div>
            </div>
          </div>
    
          <div class="col-lg-6" data-aos="fade-left" data-aos-delay="300">
            <div class="students-life-content">
              <div class="row g-4 mb-4">
                <div class="col-md-6" data-aos="zoom-in" data-aos-delay="200">
                  <div class="student-activity-item">
                    <div class="icon-box">
                      <i class="bi bi-people"></i>
                    </div>
                    <h4>Accredited Student Organizations</h4>
                  </div>
                </div>
    
                <div class="col-md-6" data-aos="zoom-in" data-aos-delay="300">
                  <div class="student-activity-item">
                    <div class="icon-box">
                      <i class="bi bi-trophy"></i>
                    </div>
                    <h4>Intramurals & Cultural Events</h4>
                  </div>
                </div>
    
                <div class="col-md-6" data-aos="zoom-in" data-aos-delay="400">
                  <div class="student-activity-item">
                    <div class="icon-box">
                      <i class="bi bi-globe"></i>
                    </div>
                    <h4>Community Extension Programs</h4>
                  </div>
                </div>
    
                <div class="col-md-6" data-aos="zoom-in" data-aos-delay="500">
                  <div class="student-activity-item">
                    <div class="icon-box">
                      <i class="bi bi-award"></i>
                    </div>
                    <h4>Academic & Leadership Awards</h4>
                  </div>
                </div>
              </div>
    
              <div class="students-life-cta" data-aos="fade-up" data-aos-delay="600">
                <a href="students-life.html" class="btn btn-primary">View All Student Activities</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <section id="news-posts" class="news-posts section">
      <div class="container section-title" data-aos="fade-up">
          <h2>News</h2>
          <p>Keep up to date with College of Business Administration's important news.</p>
        </div>
      <div class="mx-5 px-5" style="min-height: 250px;" post-aos="fade-up" data-aos-delay="100">
        <div class="row gy-2 d-flex justify-content-center" id="news-container">
          </div>
      </div>
    </section>

    <section id="news-pagination-section" class="pagination-2 section">
      <div class="container">
        <nav class="d-flex justify-content-center" aria-label="News page navigation">
          <ul id="news-pagination" class="pagination"></ul>
        </nav>
      </div>
    </section>

    <section id="announcements-posts" class="news-posts section">
      <div class="container section-title" data-aos="fade-up">
          <h2>Announcements</h2>
          <p>Important announcements from the College of Business Administration.</p>
        </div>
      <div class="mx-5 px-5" style="min-height: 250px;" post-aos="fade-up" data-aos-delay="100">
        <div class="row gy-2 d-flex justify-content-center" id="announcements-container">
          </div>
      </div>
    </section>

    <section id="announcements-pagination-section" class="pagination-2 section">
      <div class="container">
        <nav class="d-flex justify-content-center" aria-label="Announcement page navigation">
          <ul id="announcements-pagination" class="pagination"></ul>
        </nav>
      </div>
    </section>

    <div class="modal fade" id="newsModal" tabindex="-1" aria-labelledby="newsModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalTitle">Announcement Title</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">

            <div id="modalCarousel" class="carousel slide mb-3" data-bs-ride="carousel">
              <div class="carousel-inner" id="modalCarouselInner"></div>
              <button class="carousel-control-prev" type="button" data-bs-target="#modalCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#modalCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>

            <p class="text-muted" id="modalDate"></p>
            <p id="modalDescription"></p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer id="footer" class="footer position-relative dark-background">

    <div class="container footer-top">
      <div class="row gy-4">
        <div class="col-lg-4 col-md-6 footer-about">
          <a href="index.html" class="logo d-flex align-items-center" >
            <span class="sitename">ESSU CAN-AVID</span>
          </a>
          <div class="footer-contact pt-3">
            <p>Brgy. 10, Can-Avid Eastern Samar</p>
            <p class="mt-3"><strong>Phone:</strong> <span>+63909234070</span></p>
            <p><strong>Email:</strong> <span>info@example.com</span></p>
          </div>
          <div class="social-links d-flex mt-4">
            <a href=""><i class="bi bi-twitter-x"></i></a>
            <a href=""><i class="bi bi-facebook"></i></a>
            <a href=""><i class="bi bi-instagram"></i></a>
            <a href=""><i class="bi bi-linkedin"></i></a>
          </div>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Useful Links</h4>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About us</a></li>
            <li><a href="admissions.html">Admissions</a></li>
            <li><a href="academics.html">Academics</a></li>
            <li><a href="faculty-staff.html">Faculty & Staff</a></li>
          </ul>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Useful Links</h4>
          <ul>
            <li><a href="campus-facilities.html">Campus & Facilities</a></li>
            <li><a href="students-life.html">Students Life</a></li>
            <li><a href="news.html">News</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="business-economics-major-details.html">Business Economics Major Details</a></li>
          </ul>
        </div>
        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Useful Links</h4>
          <ul>
            <li><a href="finacial-management-major-details.html">Financial Management Major Details</a></li>
            <li><a href="human-resources-management-major-details.html">Human Resources Management Details</a></li>
            <li><a href="marketing-management-major-details.html">Marketing Management Major Details</a></li>
          </ul>
        </div>

      </div>
    </div>

    <div class="container copyright text-center mt-4">
      <p>© <span>Copyright</span> <strong class="px-1 sitename">MyWebsite</strong> <span>All Rights Reserved</span></p>
    </div>

  </footer>

  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
  <div id="preloader"></div>

  <!-- <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // ==== Supabase Config ====
    const supabaseUrl = 'https://kpqqmdewmtbbdjykkrny.supabase.co'
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtwcXFtZGV3bXRiYmRqeWtrcm55Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI5NjQ3NzEsImV4cCI6MjA2ODU0MDc3MX0.OAVzofMuM6ZdD6-r2c_IYT9ZE77SHlgTNVXKtwBZvl0'
    const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

    // ==== Pagination Config ====
    const ITEMS_PER_PAGE = 6;
    let currentPage = 1;
    let totalPages = 1;

    // ==== Fetch News ====
    async function fetchNews(page = 1) {
      const from = (page - 1) * ITEMS_PER_PAGE;
      const to = from + ITEMS_PER_PAGE - 1;

      const { count } = await supabase
        .from("news&announcements")
        .select("*", { count: "exact", head: true })
        .eq("archive", false); // filter archive=false


      totalPages = Math.ceil(count / ITEMS_PER_PAGE);

      const { data, error } = await supabase
        .from('news&announcements')
        .select('*')
        .eq("archive", false)
        .order('date', { ascending: false })
        .range(from, to);

      if (error) {
        console.error('Error fetching news:', error);
        return;
      }

      renderNews(data);
      renderPagination();
    }

    async function renderNews(newsItems) {
    
      const container = document.getElementById("news-container");
      container.innerHTML = "";

      if (newsItems.length === 0) {
        container.innerHTML = '<p class="text-center">No news found.</p>';
        return;
      }

      newsItems.forEach((post) => {
        const imagesHtml = generateImageGrid(post);

        const card = `
          <div class="col-lg-2">
            <div class="card shadow-sm border-0">
              <div class="card-body d-flex flex-column">
                <h5 class="fs-3">${post.title.split(" ").map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(" ")}</h5>
                <small class="text-muted">${new Date(post.date).toDateString()}</small>
                <p>
                  ${
                    post.description.length > 80
                      ? post.description.substring(0, 80) +
                        `<span class="fw-bold" style="cursor:pointer" onclick='openModal(${JSON.stringify(
                          post
                        )})'>...see more</span>`
                      : post.description
                  }
                </p>
                <div class="news-images mt-auto">${imagesHtml}</div>
              </div>
            </div>
          </div>
        `;
        container.innerHTML += card;
      });

    }

    // ==== Render Pagination ====
    function renderPagination() {
      const pagination = document.getElementById('pagination');
      pagination.innerHTML = '';

      if (totalPages == 0) return;

      pagination.insertAdjacentHTML('beforeend', `
        <li class="${currentPage === 1 ? 'disabled' : ''}">
          <a href="#" data-page="${currentPage - 1}">
            <i class="bi bi-arrow-left"></i>
            <span class="d-none d-sm-inline">Previous</span>
          </a>
        </li>
      `);

      for (let i = 1; i <= totalPages; i++) {
        pagination.insertAdjacentHTML('beforeend', `
          <li>
            <a href="#" class="${i === currentPage ? 'active' : ''}" data-page="${i}">${i}</a>
          </li>
        `);
      }

      pagination.insertAdjacentHTML('beforeend', `
        <li class="${currentPage === totalPages ? 'disabled' : ''}">
          <a href="#" data-page="${currentPage + 1}">
            <span class="d-none d-sm-inline">Next</span>
            <i class="bi bi-arrow-right"></i>
          </a>
        </li>
      `);

      document.querySelectorAll('#pagination a').forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const page = parseInt(link.getAttribute('data-page'));
          if (page >= 1 && page <= totalPages) {
            currentPage = page;
            fetchNews(currentPage);
          }
        });
      });
    }

    // Generate a Facebook-style grid
    function generateImageGrid(post) {
      images_news = [];
      images_news = post.image;

      if (!images_news || images_news.length === 0) return "";

      let html = "";
      const fixedHeight = "250px"; // adjust as needed

      if (images_news.length === 1) {
        html = `
          <div style="height:${fixedHeight}; overflow:hidden; cursor:pointer"onclick='openModal(${JSON.stringify(
                  post
                )})'>
            <img src="${images_news[0]}" class="w-100 h-100 rounded" style="object-fit:cover;" />
          </div>`;
      } 
      else if (images_news.length === 2) {
        html = `
          <div class="row g-1" style="height:${fixedHeight};cursor:pointer" onclick='openModal(${JSON.stringify(
                  post
                )})' >
            <div class="col-6">
              <div class="w-100 h-100">
                <img src="${images_news[0]}" class="w-100 h-100 rounded" style="object-fit:cover;" />
              </div>
            </div>
            <div class="col-6">
              <div class="w-100 h-100">
                <img src="${images_news[1]}" class="w-100 h-100 rounded" style="object-fit:cover;" />
              </div>
            </div>
          </div>`;
      } 
      else if (images_news.length === 3) {
        html = `
          <div class="row g-1" style="height:${fixedHeight};padding:0;">
            <div class="col-6">
              <div class="w-100" style="height:${fixedHeight}; cursor:pointer;" onclick='openModal(${JSON.stringify(
                  post
                )})' >
                <img src="${images_news[0]}" class="w-100 h-100 rounded" style="object-fit:cover;" />
              </div>
            </div>
            <div class="col-6 position-relative" style="cursor:pointer" onclick='openModal(${JSON.stringify(
                  post
                )})' >
              <div class="w-100 h-100">
                <img src="${images_news[1]}" class="w-100 h-100 rounded" style="object-fit:cover;" />
              </div>
              <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center text-white fw-bold">
                <button class="btn fs-2" >+${images_news.length - 2}</button>
              </div>
            </div>
          </div>`;
      } 
      else {
        html = `
          <div class="row g-1" style="height:${fixedHeight};padding:0;">
            <div class="col-6">
              <div class="w-100" style="height:${fixedHeight};cursor:pointer" onclick='openModal(${JSON.stringify(
                  post
                )})' >
                <img src="${images_news[0]}" class="w-100 h-100 rounded" style="object-fit:cover;" />
              </div>
            </div>
            <div class="col-6 position-relative" style="cursor:pointer" onclick='openModal(${JSON.stringify(
                  post
                )})' >
              <div class="w-100 h-100">
                <img src="${images_news[1]}" class="w-100 h-100 rounded" style="object-fit:cover;" />
              </div>
              <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center text-white fw-bold">
                <button class="btn fs-2">+${images_news.length - 2}</button>
              </div>
            </div>
          </div>`;
      }

      return html;
    }


    function openModal(post) {
      document.getElementById("modalTitle").innerText = post.title;
      document.getElementById("modalDate").innerText = new Date(post.date).toDateString();
      document.getElementById("modalDescription").innerText = post.description;

      const carouselContainer = document.getElementById('modalCarousel');
      const prevBtn = carouselContainer.querySelector('.carousel-control-prev');
      const nextBtn = carouselContainer.querySelector('.carousel-control-next');

      const carouselInner = document.getElementById("modalCarouselInner");
      carouselInner.innerHTML = "";

      if (post.image && post.image.length > 0) {
        post.image.forEach((img, index) => {
          const activeClass = index === 0 ? "active" : "";
          carouselInner.innerHTML += `
            <div class="carousel-item ${activeClass}">
              <img src="${img}" class="d-block w-100 rounded" style="max-height:400px;object-fit:cover;" alt="Announcement Image ${index+1}">
            </div>
          `;
        });

        // Hide/Show navigation based on number of images
        if (post.image.length > 1) {
          prevBtn.classList.remove('d-none');
          nextBtn.classList.remove('d-none');
        } else {
          prevBtn.classList.add('d-none');
          nextBtn.classList.add('d-none');
        }
      } else {
        carouselInner.innerHTML = `
          <div class="carousel-item active">
            <img src="./assets/img/essu_logo.jpg" class="d-block w-100 rounded" style="max-height:400px;object-fit:cover;" alt="Default Image">
          </div>
        `;
      }

      const modal = new bootstrap.Modal(document.getElementById("newsModal"));
      modal.show();
    }

    // ==== Init ====
    fetchNews(currentPage);
  </script> -->

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // ==== Supabase Config ====
    const supabaseUrl = 'https://kpqqmdewmtbbdjykkrny.supabase.co'
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtwcXFtZGV3bXRiYmRqeWtrcm55Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI5NjQ3NzEsImV4cCI6MjA2ODU0MDc3MX0.OAVzofMuM6ZdD6-r2c_IYT9ZE77SHlgTNVXKtwBZvl0'
    const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

    // ==== Pagination Config ====
    const ITEMS_PER_PAGE = 6;

    // News Pagination State
    let newsCurrentPage = 1;
    let newsTotalPages = 1;

    // Announcements Pagination State
    let announcementsCurrentPage = 1;
    let announcementsTotalPages = 1;

    // ==== Fetch Posts (News or Announcements) ====
    async function fetchPosts(type, page = 1) {
        // Determine which state variables to use
        let currentPage = page;
        let totalPages = type === 'news' ? newsTotalPages : announcementsTotalPages;

        const from = (currentPage - 1) * ITEMS_PER_PAGE;
        const to = from + ITEMS_PER_PAGE - 1;

        // 1. Get total count
        const { count } = await supabase
            .from("news&announcements")
            .select("*", { count: "exact", head: true })
            .eq("updates", type) // Filter by the 'updates' column
            .eq("archive", false);

        totalPages = Math.ceil(count / ITEMS_PER_PAGE);

        // Update the global totalPages variable for the specific type
        if (type === 'news') {
            newsTotalPages = totalPages;
        } else {
            announcementsTotalPages = totalPages;
        }

        // 2. Get paginated data
        const { data, error } = await supabase
            .from("news&announcements")
            .select("*")
            .eq("updates", type) // Filter by the 'updates' column
            .eq("archive", false)
            .order("date", { ascending: false })
            .range(from, to);


        if (error) {
            console.error(`Error fetching ${type}:`, error);
            return;
        }

        // Update the global currentPage variable for the specific type
        if (type === 'news') {
            newsCurrentPage = page;
            renderPosts(data, "news-container");
            renderPagination("news-pagination", newsCurrentPage, newsTotalPages, type);
        } else {
            announcementsCurrentPage = page;
            renderPosts(data, "announcements-container");
            renderPagination("announcements-pagination", announcementsCurrentPage, announcementsTotalPages, type);
        }
    }

    // Renamed for clarity and accepts container ID
    async function renderPosts(posts, containerId) {
        const container = document.getElementById(containerId);
        container.innerHTML = "";

        if (posts.length === 0) {
            container.innerHTML = '<p class="text-center">No items found.</p>';
            return;
        }

        posts.forEach((post) => {
            const imagesHtml = generateImageGrid(post);

            // NOTE: The openModal function is correctly defined and available globally,
            // so we don't need to pass the type here.
            const card = `
                <div class="col-12 col-md-6 col-lg-4 d-flex align-items-stretch mb-4">
                    <div class="card shadow-sm border-0 w-100 h-100">
                        <div class="card-body d-flex flex-column">
                            <h5 class="fs-3 fw-bold mb-2 text-dark">
                                ${post.title
                                    .split(" ")
                                    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))
                                    .join(" ")}
                            </h5>
                            <small class="text-muted mb-2">${new Date(post.date).toDateString()}</small>
                            <p class="fs-6 flex-grow-1">
                                ${
                                    post.description.length > 150
                                        ? post.description.substring(0, 150) +
                                            `<span class="fw-bold text-primary" style="cursor:pointer" onclick='openModal(${JSON.stringify(
                                                post
                                            )})'>...see more</span>`
                                        : post.description
                                }
                            </p>
                            <div class="news-images mt-auto">${imagesHtml}</div>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML += card;
        });
    }


    // ==== Render Pagination (Unified) ====
    function renderPagination(paginationId, currentPage, totalPages, type) {
        const pagination = document.getElementById(paginationId);
        pagination.innerHTML = '';

        if (totalPages <= 1) return; // Only show pagination if more than one page

        // Previous button
        pagination.insertAdjacentHTML('beforeend', `
            <li class="page-item ${currentPage === 1 ? 'disabled' : ''}">
                <a class="page-link" href="#" data-page="${currentPage - 1}" data-type="${type}">
                    <i class="bi bi-arrow-left"></i>
                    <span class="d-none d-sm-inline">Previous</span>
                </a>
            </li>
        `);

        // Page numbers
        for (let i = 1; i <= totalPages; i++) {
            pagination.insertAdjacentHTML('beforeend', `
                <li class="page-item">
                    <a class="page-link ${i === currentPage ? 'active' : ''}" href="#" data-page="${i}" data-type="${type}">${i}</a>
                </li>
            `);
        }

        // Next button
        pagination.insertAdjacentHTML('beforeend', `
            <li class="page-item ${currentPage === totalPages ? 'disabled' : ''}">
                <a class="page-link" href="#" data-page="${currentPage + 1}" data-type="${type}">
                    <span class="d-none d-sm-inline">Next</span>
                    <i class="bi bi-arrow-right"></i>
                </a>
            </li>
        `);

        // Event listener logic
        document.querySelectorAll(`#${paginationId} a`).forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const page = parseInt(link.getAttribute('data-page'));
                const dataType = link.getAttribute('data-type');
                if (page >= 1 && page <= totalPages) {
                    fetchPosts(dataType, page);
                }
            });
        });
    }

    // Generate a Facebook-style grid (remains the same)
    function generateImageGrid(post) {
        images_neworannouncements = [];
        images_neworannouncements = post.image;

        if (!images_neworannouncements || images_neworannouncements.length === 0) return "";

        let html = "";
        const fixedHeight = "250px"; // adjust as needed

        if (images_neworannouncements.length === 1) {
            html = `
                <div style="height:${fixedHeight}; overflow:hidden;cursor:pointer;" onclick='openModal(${JSON.stringify(
                            post
                        )})' >
                    <img src="${images_neworannouncements[0]}" class="w-100 h-100 rounded" style="object-fit:cover;" />
                </div>`;
        }
        else if (images_neworannouncements.length === 2) {
            html = `
                <div class="row g-1" style="height:${fixedHeight};cursor:pointer;" onclick='openModal(${JSON.stringify(
                            post
                        )})' >
                    <div class="col-6">
                        <div class="w-100 h-100">
                            <img src="${images_neworannouncements[0]}" class="w-100 h-100 rounded" style="object-fit:cover;" />
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="w-100 h-100">
                            <img src="${images_neworannouncements[1]}" class="w-100 h-100 rounded" style="object-fit:cover;" />
                        </div>
                    </div>
                </div>`;
        }
        else if (images_neworannouncements.length === 3) {
            html = `
                <div class="row g-1" style="height:${fixedHeight};padding:0;" >
                    <div class="col-6">
                        <div class="w-100" style="height:${fixedHeight};cursor:pointer;" onclick='openModal(${JSON.stringify(
                            post
                        )})' >
                            <img src="${images_neworannouncements[0]}" class="w-100 h-100 rounded" style="object-fit:cover;" />
                        </div>
                    </div>
                    <div class="col-6 position-relative" style="cursor:pointer" onclick='openModal(${JSON.stringify(
                            post
                        )})'>
                        <div class="w-100 h-100">
                            <img src="${images_neworannouncements[1]}" class="w-100 h-100 rounded" style="object-fit:cover;" />
                        </div>
                        <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center text-white fw-bold" style="background-color: rgba(0,0,0,0.4);">
                            <span class="fs-2" >+${images_neworannouncements.length - 2}</span>
                        </div>
                    </div>
                </div>`;
        }
        else { // 4 or more images_neworannouncements
            html = `
                <div class="row g-1" style="height:${fixedHeight};padding:0;" >
                    <div class="col-6">
                        <div class="w-100" style="height:${fixedHeight};cursor:pointer;" onclick='openModal(${JSON.stringify(
                            post
                        )})' >
                            <img src="${images_neworannouncements[0]}" class="w-100 h-100 rounded" style="object-fit:cover;" />
                        </div>
                    </div>
                    <div class="col-6 position-relative" style="cursor:pointer" onclick='openModal(${JSON.stringify(
                            post
                        )})'>
                        <div class="w-100 h-100">
                            <img src="${images_neworannouncements[1]}" class="w-100 h-100 rounded" style="object-fit:cover;" />
                        </div>
                        <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center text-white fw-bold" style="background-color: rgba(0,0,0,0.4);">
                            <span class="fs-2">+${images_neworannouncements.length - 2}</span>
                        </div>
                    </div>
                </div>`;
        }

        return html;
    }


    function openModal(post) {
        document.getElementById("modalTitle").innerText = post.title;
        document.getElementById("modalDate").innerText = new Date(post.date).toDateString();
        // Use innerHTML instead of innerText if you want to allow line breaks from the database
        // document.getElementById("modalDescription").innerHTML = post.description.replace(/\n/g, '<br>');
        document.getElementById("modalDescription").innerText = post.description;

        const carouselContainer = document.getElementById('modalCarousel');
        const prevBtn = carouselContainer.querySelector('.carousel-control-prev');
        const nextBtn = carouselContainer.querySelector('.carousel-control-next');

        const carouselInner = document.getElementById("modalCarouselInner");
        carouselInner.innerHTML = "";

        // Check for 'image' property which is an array of URLs
        if (post.image && post.image.length > 0) {
            post.image.forEach((img, index) => {
                const activeClass = index === 0 ? "active" : "";
                carouselInner.innerHTML += `
                    <div class="carousel-item ${activeClass}">
                        <img src="${img}" class="d-block w-100 rounded" style="max-height:400px;object-fit:cover;" alt="Announcement Image ${index+1}">
                    </div>
                `;
            });

            // Hide/Show navigation based on number of images
            if (post.image.length > 1) {
                prevBtn.classList.remove('d-none');
                nextBtn.classList.remove('d-none');
                carouselContainer.classList.remove('d-none'); // Show carousel
            } else {
                prevBtn.classList.add('d-none');
                nextBtn.classList.add('d-none');
                carouselContainer.classList.remove('d-none'); // Still show single image
            }
        }
        else {
            // Hide the carousel container if no images are present and show a default image.
            carouselContainer.classList.remove('d-none');
            prevBtn.classList.add('d-none');
            nextBtn.classList.add('d-none');
            carouselInner.innerHTML = `
                <div class="carousel-item active">
                    <img src="./assets/img/essu_logo.jpg" class="d-block w-100 rounded" style="max-height:400px;object-fit:cover;" alt="Default Image">
                </div>
            `;
        }

        const modal = new bootstrap.Modal(document.getElementById("newsModal"));
        modal.show();
    }
    // ==== Init ====
    fetchPosts('news', newsCurrentPage);
    fetchPosts('announcements', announcementsCurrentPage);
</script>

<script>
  const images = [
    './assets/img/hero_2.png',
    './assets/img/hero1.png',
    './assets/img/hero.jpg',
    './assets/img/hero2.png',
    './assets/img/background.png',
  ];

  let currentIndex = 0;
  const heroSection = document.getElementById('hero');
  const dotsContainer = document.querySelector('.carousel-dots');

  // Create dots
  images.forEach((_, idx) => {
    const dot = document.createElement('span');
    if(idx === 0) dot.classList.add('active');
    dot.addEventListener('click', () => goToSlide(idx));
    dotsContainer.appendChild(dot);
  });

  const dots = dotsContainer.querySelectorAll('span');

  function updateDots() {
    dots.forEach(dot => dot.classList.remove('active'));
    dots[currentIndex].classList.add('active');
  }

  function showSlide(index) {
    heroSection.style.backgroundImage = `url('${images[index]}')`;
    currentIndex = index;
    updateDots();
  }

  function nextSlide() {
    let nextIndex = currentIndex + 1;
    if(nextIndex >= images.length) nextIndex = 0;
    showSlide(nextIndex);
  }

  function prevSlide() {
    let prevIndex = currentIndex - 1;
    if(prevIndex < 0) prevIndex = images.length - 1;
    showSlide(prevIndex);
  }

  function goToSlide(index) {
    showSlide(index);
  }

  document.querySelector('.carousel-arrow.next').addEventListener('click', nextSlide);
  document.querySelector('.carousel-arrow.prev').addEventListener('click', prevSlide);

  // Auto slide every 5s
  setInterval(nextSlide, 5000);

  // Initialize first slide
  showSlide(0);
</script>

  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/js/main.js"></script>

</body>

</html>